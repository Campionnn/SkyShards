var I=Object.defineProperty,P=Object.defineProperties;var M=Object.getOwnPropertyDescriptors;var v=Object.getOwnPropertySymbols;var W=Object.prototype.hasOwnProperty,z=Object.prototype.propertyIsEnumerable;var y=(r,t,s)=>t in r?I(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s,S=(r,t)=>{for(var s in t||(t={}))W.call(t,s)&&y(r,s,t[s]);if(v)for(var s of v(t))z.call(t,s)&&y(r,s,t[s]);return r},N=(r,t)=>P(r,M(t));var w=(r,t,s)=>new Promise((h,i)=>{var d=n=>{try{o(s.next(n))}catch(c){i(c)}},m=n=>{try{o(s.throw(n))}catch(c){i(c)}},o=n=>n.done?h(n.value):Promise.resolve(n.value).then(d,m);o((s=s.apply(r,t)).next())});import{d as A,j as e,R as B,T as H,c as q}from"./index-BXRtEfEt.js";import{r as a}from"./vendor-e8ACzjHW.js";import{D as G,u as J}from"./useCustomRates--fFrVg9p.js";import{b as K,R as O,g as Q}from"./icons-BJnD6z6O.js";import"./forms-B7jjzPDX.js";const U=()=>{const[r,t]=a.useState([]),[s,h]=a.useState(!0),[i,d]=a.useState(null);return a.useEffect(()=>{w(null,null,function*(){try{h(!0);const o=G.getInstance(),[n,c]=yield Promise.all([o.loadShards(),o.loadDefaultRates()]),u=n.map(x=>N(S({},x),{rate:c[x.key]||0,isDirect:(c[x.key]||0)>0}));t(u),d(null)}catch(o){d(o instanceof Error?o.message:"Failed to load shards and recipes")}finally{h(!1)}})},[]),{shards:r,loading:s,error:i}},ee=()=>{console.log("SettingsPage rendered");const{shards:r,loading:t}=U(),{customRates:s,defaultRates:h,updateRate:i,resetRates:d}=J(),[m,o]=a.useState(""),[n,c]=a.useState("all"),[u,x]=a.useState("all"),[R,p]=a.useState(!1),[b,C]=a.useState(""),j=a.useMemo(()=>A(l=>C(l),300),[]);a.useEffect(()=>{j(m)},[m,j]);const f=a.useMemo(()=>r.filter(l=>{const g=l.name.toLowerCase().includes(b.toLowerCase()),T=n==="all"||l.rarity===n,L=u==="all"||u==="direct"&&l.isDirect||u==="fuse"&&!l.isDirect;return g&&T&&L}),[r,b,n,u]),D=a.useCallback((l,g)=>{i(l,g),p(!0)},[i]),k=a.useCallback(()=>{confirm("Are you sure you want to reset all rates to their defaults? This will clear all custom rates.")&&(d(),p(!1))},[d]),F=a.useCallback(()=>{p(!1)},[]),E=a.useCallback(l=>{o(l.target.value)},[]);return t?e.jsx("div",{className:"flex items-center justify-center py-16",children:e.jsx("div",{className:"w-8 h-8 border-2 border-purple-500/20 border-t-purple-500 rounded-full animate-spin"})}):e.jsxs("div",{className:"min-h-screen flex flex-col space-y-4 py-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-purple-400 to-blue-400 bg-clip-text text-transparent mb-2",children:"Custom Shard Rates"}),e.jsx("p",{className:"text-slate-400",children:"Customize gathering rates for more accurate calculations"})]}),e.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-md p-4",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row gap-3",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(K,{className:"h-5 w-5 text-slate-400"})}),e.jsx("input",{type:"text",value:m,onChange:E,placeholder:"Search shards...",className:`
                w-full pl-10 pr-4 py-2.5 
                bg-white/5 border border-white/10 
                rounded-md text-white placeholder-slate-400
                focus:outline-none focus:ring-2 focus:ring-purple-500/50 focus:border-purple-500/50
                transition-colors duration-200
              `})]}),e.jsx(B,{value:n,onChange:c}),e.jsx(H,{value:u,onChange:x}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:k,className:`
                px-3 py-2.5 bg-red-500/20 hover:bg-red-500/30 
                text-red-400 font-medium rounded-md 
                border border-red-500/20 hover:border-red-500/30
                transition-colors duration-200
                flex items-center space-x-2 cursor-pointer
              `,children:[e.jsx(O,{className:"w-4 h-4"}),e.jsx("span",{children:"Reset"})]}),R&&e.jsxs("button",{onClick:F,className:`
                  px-3 py-2.5 bg-green-500/20 hover:bg-green-500/30 
                  text-green-400 font-medium rounded-md 
                  border border-green-500/20 hover:border-green-500/30
                  transition-colors duration-200
                  flex items-center space-x-2 cursor-pointer
                `,children:[e.jsx(Q,{className:"w-4 h-4"}),e.jsx("span",{children:"Save"})]})]})]}),e.jsx("div",{className:"mt-3 text-sm text-slate-400",children:e.jsxs("p",{children:["Base rates (shards/hour) â€¢ Showing ",f.length," of ",r.length," shards"]})})]}),e.jsx("div",{className:"bg-white/5 border border-white/10 rounded-md overflow-hidden flex-1",children:e.jsx("div",{className:"h-full overflow-y-auto",children:e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-2 p-3",children:f.map(l=>e.jsx(q,{shard:l,rate:s[l.key]||h[l.key]||0,onRateChange:D},l.key))})})}),f.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-6xl mb-4",children:"ğŸ”"}),e.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"No Shards Found"}),e.jsx("p",{className:"text-slate-400",children:"Try adjusting your search or filter criteria"})]})]})};export{ee as SettingsPage};
