var x=Object.defineProperty,E=Object.defineProperties;var I=Object.getOwnPropertyDescriptors;var f=Object.getOwnPropertySymbols;var D=Object.prototype.hasOwnProperty,O=Object.prototype.propertyIsEnumerable;var v=(t,e,s)=>e in t?x(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,S=(t,e)=>{for(var s in e||(e={}))D.call(e,s)&&v(t,s,e[s]);if(f)for(var s of f(e))O.call(e,s)&&v(t,s,e[s]);return t},C=(t,e)=>E(t,I(e));var b=t=>typeof t=="symbol"?t:t+"",j=(t,e)=>{var s={};for(var a in t)D.call(t,a)&&e.indexOf(a)<0&&(s[a]=t[a]);if(t!=null&&f)for(var a of f(t))e.indexOf(a)<0&&O.call(t,a)&&(s[a]=t[a]);return s};var w=(t,e,s)=>new Promise((a,u)=>{var i=o=>{try{m(s.next(o))}catch(r){u(r)}},y=o=>{try{m(s.throw(o))}catch(r){u(r)}},m=o=>o.done?a(o.value):Promise.resolve(o.value).then(i,y);m((s=s.apply(t,e)).next())});import{r as d}from"./vendor-Dt516RNf.js";import{D as J}from"./dataService-BCcBhZgZ.js";const F=()=>{const[t,e]=d.useState({}),[s,a]=d.useState({}),[u,i]=d.useState(!0);return d.useEffect(()=>{w(null,null,function*(){try{i(!0);const c=yield J.getInstance().loadDefaultRates();a(c);const n=localStorage.getItem("customRates");if(n)try{const l=JSON.parse(n);e(S({},l))}catch(l){e({})}else e({})}catch(r){console.error("Failed to load rates:",r),e({}),a({})}finally{i(!1)}})},[]),{customRates:t,defaultRates:s,loading:u,updateRate:(o,r)=>{let c;if(r===void 0){const l=t,{[o]:g}=l,R=j(l,[b(o)]);c=S({},R)}else c=C(S({},t),{[o]:r});e(c);const n=Object.entries(c).reduce((g,[R,p])=>(p!==void 0&&p!==s[R]&&(g[R]=p),g),{});Object.keys(n).length>0?localStorage.setItem("customRates",JSON.stringify(n)):localStorage.removeItem("customRates")},resetRates:()=>{e({}),localStorage.removeItem("customRates")}}};export{F as u};
